const quizData = [
{
  question: "化粧品製造販売業許可を取得するために必要なものは？",
  choices: [
    "所定の申請書と必要書類の提出",
    "医師免許",
    "販売士資格",
    "運転免許証"
  ],
  answer: 0
},
{
  question: "化粧品製造販売業許可を出すのはどこですか？",
  choices: [
    "厚生労働省",
    "都道府県知事",
    "経済産業省",
    "消費者庁"
  ],
  answer: 1
},
{
  question: "化粧品製造販売業許可が必要となるのはどんな場合？",
  choices: [
    "化粧品を製造または販売する場合",
    "広告を作成する場合",
    "従業員を雇う場合",
    "店舗を改装する場合"
  ],
  answer: 0
},
{
  question: "化粧品製造販売業許可の有効期間は原則何年ですか？",
  choices: [
    "1年",
    "3年",
    "5年",
    "10年"
  ],
  answer: 2
},
{
  question: "化粧品製造販売業許可を持たずに販売した場合どうなる？",
  choices: [
    "法律違反となり罰則を受ける",
    "特に問題ない",
    "消費者庁に報告するだけでよい",
    "広告ができなくなるだけ"
  ],
  answer: 0
},
{
  question: "化粧品製造販売業許可を取得するために必要な管理者は？",
  choices: [
    "製造管理者と品質管理者",
    "医師",
    "販売士",
    "薬局長"
  ],
  answer: 0
},
{
  question: "化粧品製造販売業許可を更新する際に必要なことは？",
  choices: [
    "有効期間満了前に更新申請を行う",
    "新しい商品を発売する",
    "従業員全員の資格を取得する",
    "広告を作成する"
  ],
  answer: 0
},
{
  question: "化粧品製造販売業許可を持つ会社が守るべき主な法律は？",
  choices: [
    "医薬品医療機器等法（薬機法）",
    "道路交通法",
    "労働基準法",
    "消費税法"
  ],
  answer: 0
},
{
  question: "化粧品製造販売業許可を持つ会社が行うべき品質管理の内容は？",
  choices: [
    "製品の安全性や有効性の確認",
    "商品のデザイン変更",
    "販売価格の決定",
    "従業員の休憩時間の調整"
  ],
  answer: 0
},
{
  question: "化粧品製造販売業許可を取得する際に必要な管理者はどれ？",
  choices: [
    "製造管理者と品質管理者",
    "医師",
    "薬剤師",
    "販売士"
  ],
  answer: 0
},
{
  question: "化粧品の製造記録の保存期間として正しいものは？",
  choices: [
    "1年間",
    "3年間",
    "5年間",
    "10年間"
  ],
  answer: 2
},
{
  question: "化粧品の製造所で義務付けられている管理者は誰？",
  choices: [
    "製造管理者",
    "医師",
    "販売士",
    "薬局長"
  ],
  answer: 0
},
{
  question: "化粧品の製造工程で必要な衛生管理として正しいものは？",
  choices: [
    "手洗い・消毒の徹底",
    "作業着の着用義務なし",
    "製造室での飲食可",
    "原材料の管理不要"
  ],
  answer: 0
},
{
  question: "化粧品の製造販売後に発生した健康被害の報告先は？",
  choices: [
    "消費者庁",
    "厚生労働省",
    "都道府県知事",
    "経済産業省"
  ],
  answer: 2
},
{
  question: "化粧品の製造所で作業前に必ず行うべきことは？",
  choices: [
    "手洗い・消毒",
    "広告の確認",
    "販売価格の見直し",
    "新商品の企画"
  ],
  answer: 0
},
{
  question: "化粧品の製造工程で異物混入を防ぐために必要なことは？",
  choices: [
    "作業着や帽子の着用",
    "音楽を流す",
    "窓を開ける",
    "携帯電話の使用"
  ],
  answer: 0
},
{
  question: "化粧品の製造記録を残す主な目的は？",
  choices: [
    "製造過程の追跡と品質管理",
    "従業員の評価",
    "広告作成のため",
    "販売促進のため"
  ],
  answer: 0
},
{
  question: "化粧品の製造所で定期的に点検すべきものは？",
  choices: [
    "製造設備や器具の清掃・点検",
    "従業員の私物",
    "会社のホームページ",
    "近隣店舗の価格"
  ],
  answer: 0
},
{
  question: "化粧品の製造において原材料の管理で重要なことは？",
  choices: [
    "入荷時の検品と適切な保管",
    "広告の作成",
    "販売価格の決定",
    "従業員の休憩時間の調整"
  ],
  answer: 0
},
{
  question: "化粧品の定義として正しいものはどれ？",
  choices: [
    "人の身体を清潔にし、美化し、魅力を増し、皮膚や毛髪を健やかに保つためのもの",
    "病気を治療するためのもの",
    "食品の一種",
    "医薬品と同じ効能を持つもの"
  ],
  answer: 0
},
{
  question: "化粧品の効能効果として認められていないものはどれ？",
  choices: [
    "肌の清浄",
    "美白",
    "がんの治療",
    "皮膚や毛髪を健やかに保つ"
  ],
  answer: 2
},
{
  question: "化粧品のパッケージに必ず記載しなければならないものは？",
  choices: [
    "全成分表示",
    "広告文",
    "販売価格",
    "製造工場の写真"
  ],
  answer: 0
},
{
  question: "化粧品の広告で使ってはいけない表現は？",
  choices: [
    "治る",
    "美しく見せる",
    "清潔にする",
    "肌を整える"
  ],
  answer: 0
},
{
  question: "化粧品の製造販売業許可を持つ会社が行うべき衛生管理は？",
  choices: [
    "作業前の手洗い・消毒",
    "作業中の飲食",
    "作業着の着用義務なし",
    "原材料の管理不要"
  ],
  answer: 0
},
{
  question: "化粧品の製造所で定期的に実施すべきことは？",
  choices: [
    "従業員の健康診断",
    "広告の作成",
    "販売価格の見直し",
    "店舗の改装"
  ],
  answer: 0
},
{
  question: "化粧品の製造販売後に発生した健康被害の報告は誰が行う？",
  choices: [
    "製造販売業者",
    "消費者",
    "販売店",
    "広告代理店"
  ],
  answer: 0
},
{
  question: "化粧品の製造販売業許可の有効期間が満了した場合どうなる？",
  choices: [
    "許可が失効する",
    "自動的に更新される",
    "罰則が科される",
    "販売価格が上がる"
  ],
  answer: 0
},
{
  question: "化粧品の製造販売業許可を持つ会社が守るべき主な法律は？",
  choices: [
    "医薬品医療機器等法（薬機法）",
    "道路交通法",
    "労働基準法",
    "消費税法"
  ],
  answer: 0
},
{
  question: "化粧品の製造販売業許可を持つ会社が行うべき品質管理の内容は？",
  choices: [
    "製品の安全性や有効性の確認",
    "商品のデザイン変更",
    "販売価格の決定",
    "従業員の休憩時間の調整"
  ],
  answer: 0
},
{
  question: "化粧品の製造販売業許可を取得するために必要な管理者はどれ？",
  choices: [
    "製造管理者と品質管理者",
    "医師",
    "薬剤師",
    "販売士"
  ],
  answer: 0
},
{
  question: "化粧品の製造所で作業前に必ず行うべきことは？",
  choices: [
    "手洗い・消毒",
    "広告の確認",
    "販売価格の見直し",
    "新商品の企画"
  ],
  answer: 0
},
{
  question: "化粧品の製造工程で異物混入を防ぐために必要なことは？",
  choices: [
    "作業着や帽子の着用",
    "音楽を流す",
    "窓を開ける",
    "携帯電話の使用"
  ],
  answer: 0
},
{
  question: "化粧品の製造記録を残す主な目的は？",
  choices: [
    "製造過程の追跡と品質管理",
    "従業員の評価",
    "広告作成のため",
    "販売促進のため"
  ],
  answer: 0
},
{
  question: "化粧品の製造所で定期的に点検すべきものは？",
  choices: [
    "製造設備や器具の清掃・点検",
    "従業員の私物",
    "会社のホームページ",
    "近隣店舗の価格"
  ],
  answer: 0
},
{
  question: "化粧品の製造において原材料の管理で重要なことは？",
  choices: [
    "入荷時の検品と適切な保管",
    "広告の作成",
    "販売価格の決定",
    "従業員の休憩時間の調整"
  ],
  answer: 0
},
{
  question: "化粧品の製造販売業許可を持たずに販売した場合の罰則は？",
  choices: [
    "懲役や罰金などの刑事罰",
    "特に罰則はない",
    "広告ができなくなるだけ",
    "消費者庁に報告するだけ"
  ],
  answer: 0
},
{
  question: "化粧品の全成分表示義務がある理由は？",
  choices: [
    "消費者が成分を確認できるようにするため",
    "広告のため",
    "販売価格を決めるため",
    "製造工場の宣伝のため"
  ],
  answer: 0
},
{
  question: "化粧品の製造販売業許可を持つ会社が行うべき苦情処理の内容は？",
  choices: [
    "消費者からの苦情や健康被害の報告を適切に対応する",
    "広告を増やす",
    "販売価格を下げる",
    "従業員の休憩時間を増やす"
  ],
  answer: 0
},
{
  question: "化粧品の製造販売業許可を持つ会社が行うべき教育訓練は？",
  choices: [
    "従業員に衛生管理や品質管理の教育を行う",
    "広告の作成方法のみ教える",
    "販売価格の決め方のみ教える",
    "休憩時間の使い方のみ教える"
  ],
  answer: 0
},
{
  question: "化粧品製造販売業許可を持たずに販売した場合の罰則は？",
  choices: [
    "懲役や罰金などの刑事罰",
    "特に罰則はない",
    "広告ができなくなるだけ",
    "消費者庁に報告するだけ"
  ],
  answer: 0
}
  // 必要に応じて問題を追加
];

// --- 以降はquiz.jsと同じロジックを流用 ---
function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}

const shuffledQuizData = quizData.map(q => {
  const choices = [...q.choices];
  const correct = q.choices[q.answer];
  shuffle(choices);
  return {
    question: q.question,
    choices: choices,
    answer: choices.indexOf(correct)
  };
});
shuffle(shuffledQuizData);

let currentQuiz = 0;
let score = 0;

function loadQuiz() {
  const quiz = shuffledQuizData[currentQuiz];
  const quizEl = document.getElementById('quiz');
  quizEl.innerHTML = `
    <div class="mb-4 text-xl font-semibold">${quiz.question}</div>
    <div class="flex flex-col gap-3">
      ${quiz.choices.map((choice, idx) => `
        <label class="cursor-pointer flex items-center gap-2">
          <input type="radio" name="answer" value="${idx}" class="accent-pink-500" />
          <span>${choice}</span>
        </label>
      `).join('')}
    </div>
  `;
  document.getElementById('results').textContent = '';
}

function showResult(isCorrect, correctAnswerText) {
  const results = document.getElementById('results');
  if (isCorrect) {
    results.innerHTML = `<span class="text-pink-600 text-3xl font-bold animate-bounce">正解！</span>`;
  } else {
    results.innerHTML = `<span class="text-red-600 text-2xl font-bold animate-pulse">不正解...<br>正解：${correctAnswerText}</span>`;
  }
}

document.getElementById('submit').addEventListener('click', () => {
  const selected = document.querySelector('input[name="answer"]:checked');
  if (!selected) {
    document.getElementById('results').textContent = "選択肢を選んでください。";
    return;
  }
  const quiz = shuffledQuizData[currentQuiz];
  const isCorrect = parseInt(selected.value) === quiz.answer;
  const correctAnswerText = quiz.choices[quiz.answer];
  showResult(isCorrect, correctAnswerText);

  setTimeout(() => {
    currentQuiz++;
    if (currentQuiz < shuffledQuizData.length) {
      loadQuiz();
    } else {
      document.getElementById('quiz').innerHTML = '';
      document.getElementById('submit').style.display = 'none';
      document.getElementById('results').innerHTML = `<span class="text-pink-700 text-2xl font-bold animate-fade-in">終了！あなたの正解数は ${score} / ${shuffledQuizData.length} です。</span>`;
    }
  }, 1200);

  if (isCorrect) score++;
});

loadQuiz();